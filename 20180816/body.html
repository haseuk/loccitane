<div class="rWrap">
  <div class="aligner">
    <div class="p01">
      <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_60e5a6ab3fa24b0baec97f17249118e3.png" class="hidden-lg" usemap="#p01">
      <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_ce531d1d3ef6430bbb089239285e01ed.png" class="hidden-sm" usemap="#p01">
      <div id="particle"></div>
      <!--<map name="p01">-->
        <!--<area alt="샘풀 신청하기"-->
              <!--href="http://mini.loccitane.co.kr/newsite/event/1808_immortelle/sample.asp" target="_blank"-->
              <!--data-m="127, 312, 332, 357"-->
              <!--data-pc="647, 335, 836, 379"-->
              <!--shape="rect">-->
      <!--</map>-->
      <iframe src="https://www.youtube.com/embed/KAmkT4kijho?rel=0&amp;showinfo=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>
    <div class="p02">
      <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_651ffafb75da4210a243fc73ccff619b.png" class="hidden-lg" usemap="#p02">
      <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_5e708d1ca8584b80903f84f013e3302e.png" class="hidden-sm" usemap="#p02">
      <map name="p02">
        <area alt="이모르뗄 리셋 오일 인 세럼"
              href="http://kr.loccitane.com/default.aspx?a=1277791" target="_blank"
              data-m="285, 178, 444, 175, 442, 375, 489, 412, 456, 718, 276, 729, 231, 453, 283, 372"
              data-pc="749, 236, 897, 235, 902, 438, 948, 469, 906, 791, 739, 793, 694, 518, 743, 437"
              shape="poly">
      </map>
    </div>
    <div class="p03">
      <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_73e6d526e6064c6db32379d98e5ed5fa.png" class="hidden-lg">
      <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_ef79bdf7ff944729bd72314ea1b3f7e0.png" class="hidden-sm">

      <ul class="slider">
        <li>
          <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_f2c5855d9d134919bf17a60b36ff0a0f.png" class="hidden-lg" usemap="#p03-3">
          <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_09217a3eb3634f25b1586cc4ab1b7df0.png" class="hidden-sm" usemap="#p03-3">
          <map name="p03-3">
            <area alt="보습 루틴케어"
                  href="http://kr.loccitane.com/default.aspx?a=1277931" target="_blank"
                  data-m="215, 571, 509, 613"
                  data-pc="587, 392, 890, 440"
                  shape="rect">
          </map>
        </li>
        <li>
          <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_14bc591c47d04834a48d0eef3bd8040d.png" class="hidden-lg" usemap="#p03-1">
          <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_72e8778d36544ba0946c8e008b422e7a.png" class="hidden-sm" usemap="#p03-1">
          <map name="p03-1">
            <area alt="탄력 루틴 케어"
                  href="http://kr.loccitane.com/default.aspx?a=1277819" target="_blank"
                  data-m="215, 571, 509, 613"
                  data-pc="587, 392, 890, 440"
                  shape="rect">
          </map>
        </li>
        <li>
          <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_362d197743fe4d479c7b315e00eb7ca1.png" class="hidden-lg" usemap="#p03-4">
          <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_d5a5face03ab440796d5e286e380d8dd.png" class="hidden-sm" usemap="#p03-4">
          <map name="p03-4">
            <area alt="화이트닝 루틴 케어"
                  href=" http://kr.loccitane.com/default.aspx?a=1278394" target="_blank"
                  data-m="215, 571, 509, 613"
                  data-pc="587, 392, 890, 440"
                  shape="rect">
          </map>
        </li>
        <li>
          <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_b1b80dfd14dc404b86c2c7dad6406d04.png" class="hidden-lg" usemap="#p03-2">
          <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_98269a42bdbe4b499cff8aa5b9a87798.png" class="hidden-sm" usemap="#p03-2">
          <map name="p03-2">
            <area alt="수분 루틴 케어"
                  href="http://kr.loccitane.com/default.aspx?a=1277824" target="_blank"
                  data-m="215, 571, 509, 613"
                  data-pc="587, 392, 890, 440"
                  shape="rect">
          </map>
        </li>
      </ul>
    </div>
    <!--<div class="p04">-->
      <!--<img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_48f6307ff33e4d95b83d2f3c164df6f6.png" class="hidden-lg" usemap="#p04">-->
      <!--<img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_babf47540d764c65a59ddb3100a96f92.png" class="hidden-sm" usemap="#p04">-->
      <!--<map name="p04">-->
        <!--<area alt="응모하러가기"-->
            <!--href="http://mini.loccitane.co.kr/newsite/event/1808_immortelle/index.asp" target="_blank"-->
            <!--data-m="226, 313, 498, 357"-->
            <!--data-pc="815, 895, 1085, 940"-->
            <!--shape="rect">-->
      <!--</map>-->
    <!--</div>-->
    <div class="p05"></div>
    <div class="nav-open hidden-lg">
      <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_d598e0c5636644f2b29409e0b18a5605.png" class="hidden-lg" onclick="openNav()">
    </div>
    <div class="nav">
      <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_12010682e7a64e88861701aded8fd958.png" class="hidden-lg" usemap="#nav">
      <img src="//img.loccitane.com/ocms/img/lib/PROMO/OCC_8154feddcbf74444a1d3ac2b5bcb08f7.png" class="hidden-sm" usemap="#nav">
      <map name="nav">
        <area shape="rect" data-m="7, 4, 140, 102" data-pc="0, 0, 86, 69" href="javascript:;" onclick="closeOrTop()" alt="">
        <!--<area shape="rect" data-m="7, 124, 140, 241" data-pc="0, 87, 86, 158" href="http://mini.loccitane.co.kr/newsite/event/1808_immortelle/sample.asp" target="_blank" alt="">-->
        <area shape="rect" data-m="7, 124, 140, 241" data-pc="0, 87, 86, 158" href="javascript:;" onclick="move('p02')" alt="">
        <area shape="rect" data-m="7, 251, 140, 399" data-pc="0, 173, 86, 262" href="javascript:;" onclick="move('p03')" alt="">
      </map>
    </div>
  </div>
  <script src="//code.jquery.com/jquery.min.js"></script>
  <script>
    var canvas = (function(){
      var drop = 2;
      var bounce = 0.5;
      var height = 550;
      var width = 50;
      var leftChange = 0.01;
      var minSize = 20;
      var maxSize = 30;
      var bubbles = [
        'url(//img.loccitane.com/ocms/img/lib/PROMO/OCC_e05318af80fa47638df6dba27fca8a00.png)',
        'url(//img.loccitane.com/ocms/img/lib/PROMO/OCC_b34d3a8f39fe42d2b801334932cf9f0a.png)',
        'url(//img.loccitane.com/ocms/img/lib/PROMO/OCC_62c4bb3375834bb2acfee0e3ff7c6a34.png)',
        'url(//img.loccitane.com/ocms/img/lib/PROMO/OCC_1c3dfd9c42a04d3c966797d4cfcbaba4.png)',
        'url(//img.loccitane.com/ocms/img/lib/PROMO/OCC_d32e9f82cd04410580b5c1871505108f.png)'
      ];

      function Particle(parent) {
        parent.append(this.element = document.createElement("i"));
        var ratio = Math.min(1, window.innerWidth / 750);
        parent.css({zoom: ratio});
        this.element.style.backgroundImage = bubbles[Math.floor(Math.random()*5)];
        this.init();
      }

      Particle.prototype.init = function() {
        this.leftDirection = Math.random() < 0.5 ? 1 : -1;
        this.left = this.leftDirection * (width - Math.random() * width * 0.3);
        this.bottom = 0;
        this.opacity = 0.1;
        this.size = Math.ceil(minSize + Math.random() * (maxSize - minSize));
        return this;
      };

      Particle.prototype.tick = function() {
        this.leftDirection = Math.random() < leftChange || Math.abs(this.left) > 100 ? this.leftDirection*-1 : this.leftDirection;
        this.bottom += drop;
        this.left += bounce * this.leftDirection;
        if (this.bottom > height*0.5) {
          this.size = this.size * 0.995;
          this.left = this.left * 0.99;
          this.opacity = this.opacity * 0.98;
        } else if(this.opacity < 1) {
          this.opacity += 0.01;
          this.left = this.left * 1.008;
          this.size = this.size * 1.002;
        }

        this.sync();
        return this.opacity < 0.01;
      };

      Particle.prototype.sync = function() {
        this.element.style.bottom = this.bottom + "px";
        this.element.style.left = this.left + "px";
        this.element.style.opacity = this.opacity + "";
        this.element.style.width = this.size+'px';
        this.element.style.height = this.size+'px';
        this.element.style.borderRadius = (this.size/2)+'px';
      };

      function Canvas(parent) {
        this.parent = parent;
        this.particles = [];
        this.garbage = [];
        this.start();
      }

      Canvas.prototype.getParticle = function() {
        if (this.garbage.length) return this.garbage.pop().init();
        return new Particle(this.parent);
      };

      Canvas.prototype.loop = function() {
        // 주기적으로 ( 확률 혹은 30틱에 한번씩? ) 새로운 파트클을 추가
        // 파티클 목록의 모든 파티클의 tick()을 실행해주고 다 밑으로 내려간 파티클의 경우 파티클 목록에서 제거
        if (Math.random() < 0.2) {
          this.particles.push(this.getParticle());
        }
        var i = this.particles.length;
        while(i--) {
          var particle = this.particles[i];
          if (particle.tick()) {
            this.particles.splice(i,1);
            this.garbage.push(particle);
          }
        }
      };

      Canvas.prototype.start = function() {
        var self = this;
        setInterval(function(){
          self.loop();
        },20);
      };

      return function(parent) {
        new Canvas(parent);
      }
    })();

    canvas($('#particle'));

    function resized() {
      var w = $(window).width();
      var scale = w / 730;
      $("map area").attr('coords', function () {
        var result;
        if (w < 1000) {
          var arr = $(this).data('m').split(",");
          for (var i = 0; i < arr.length; ++i) {
            arr[i] = arr[i] * scale;
          }
          result = arr.join(",");
        } else {
          result = $(this).data('pc');
        }
        return result;
      });
    }
    $(window).resize(resized);
    resized();
    $(window).on('scroll',function(){
      var t = $(window).scrollTop() - $('.p05').offset().top + window.innerHeight;
      if (t > 0) {
        $('.nav, .nav-open').css({marginTop: -t});
      } else {
        $('.nav, .nav-open').css({marginTop: 0});
      }
    });

    function openNav() {
      $('.nav-open').addClass('on');
    }

    function closeOrTop() {
      if ($(window).width() < 1000) {
        $('.nav-open').removeClass('on');
      } else {
        $('html, body').animate({scrollTop: 0});
      }
    }

    function move(to) {
      var offset = $(window).width() < 1000 ? 66 : 100;
      $("html, body").animate({scrollTop: $("."+to).offset().top - offset});
      $('.nav-open').removeClass('on');
    }
  </script>
  <script src="//mini.loccitane.co.kr/newsite/event/1804_pleasure/js/slick.min.js"></script>
  <script>
    $('.slider').slick({});
    var arr = [];
    $('img').click(function(e){
      if (e.altKey) {
        console.log(arr);
        arr = [];
      } else {
        arr.push(e.offsetX);
        arr.push(e.offsetY);
      }
    });
  </script>
</div>